{% extends "base.html" %}

{% block content %}

{% if page.is_homepage %}

<h2>ğŸš€ Neueste BeitrÃ¤ge</h2>

{# --- Alle Seiten aus nav.pages sammeln --- #}
{% set recent_pages = [] %}

{% for p in nav.pages %}
    {% if p.meta is defined %}
        {% if p.meta.revision_date is defined or p.meta.git_revision_date_localized is defined %}
            {% set recent_pages = recent_pages + [p] %}
        {% endif %}
    {% endif %}
{% endfor %}

{# --- Sortieren nach Ã„nderungsdatum --- #}
{% set sorted_pages = recent_pages
    | sort(attribute="meta.revision_date", reverse=True, default="1970-01-01")
    | sort(attribute="meta.git_revision_date_localized", reverse=True, default="1970-01-01")
%}

<ul>
{% for p in sorted_pages | slice(3) %}
    <li>
        <a href="{{ p.url | url }}">{{ p.title }}</a>
        <small>
            (
            {% if p.meta.revision_date is defined %}
                zuletzt geÃ¤ndert: {{ p.meta.revision_date.strftime('%Y-%m-%d') }}
            {% elif p.meta.git_revision_date_localized is defined %}
                zuletzt geÃ¤ndert: {{ p.meta.git_revision_date_localized }}
            {% else %}
                kein Datum
            {% endif %}
            )
        </small>
    </li>
{% endfor %}
</ul>

<hr>

{% endif %}

{{ super() }}

{% endblock %}

{% block content_article_footer %}

<hr>

<script src="https://giscus.app/client.js"
        data-repo="umbassa-long/wiki-code"
        data-repo-id="R_kgDOP3PyJA"
        data-category="Neuigkeiten"
        data-category-id="DIC_kwDOP3PyJM4Cx8D4"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="1"
        data-input-position="bottom"
        data-theme="preferred_color_scheme"
        data-lang="de"
        crossorigin="anonymous"
        async>
</script>

{% endblock %}
