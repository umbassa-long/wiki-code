{% extends "base.html" %}

{% block content %}

{% if page.is_homepage %}
    <h2>ğŸš€ Neueste BeitrÃ¤ge</h2>
    <ul>
      {# Verwenden Sie die Seitenliste direkt aus der Konfiguration, wenn mÃ¶glich (oft nicht verfÃ¼gbar) #}
      {# Wir MÃœSSEN nav.pages verwenden, aber das Element benennen wir 'item' #}
      
      {# Zuerst filtern wir die Liste der Seiten, um nur echte Seiten mit Metadaten zu erhalten #}
      {% set recent_pages = [] %}
      {% for item in nav.pages %}
        {% if item.is_page and item.meta.revision_date is defined %}
          {# FÃ¼gen Sie das Seitenobjekt zur Liste hinzu #}
          {% set recent_pages = recent_pages + [item] %}
        {% endif %}
      {% endfor %}

      {# Jetzt die gefilterte Liste sortieren und ausgeben #}
      {% for item in recent_pages | sort(attribute='meta.revision_date', reverse=True) | slice(3) %}
        <li>
          <a href="{{ item.url | url }}">{{ item.title }}</a>
          <small> (zuletzt geÃ¤ndert: {{ item.meta.revision_date.strftime('%Y-%m-%d') }})</small>
        </li>
      {% endfor %}
    </ul>
    <hr>
  {% endif %}

  {{ super() }}
  
  {# NEUER VERSUCH: Unterstriche (_) als Trennzeichen #}
  {% block content_article_bottom %} 
    <hr>
    
    <script src="https://giscus.app/client.js"
            data-repo="umbassa-long/wiki-code"
            data-repo-id="R_kgDOP3PyJA"
            data-category="Neuigkeiten"
            data-category-id="DIC_kwDOP3PyJM4Cx8D4"
            data-mapping="pathname"
            data-strict="0"
            data-reactions-enabled="1"
            data-emit-metadata="1"
            data-input-position="bottom"
            data-theme="preferred_color_scheme"
            data-lang="de"
            crossorigin="anonymous"
            async>
    </script>
    
  {% endblock %}
{% endblock %}