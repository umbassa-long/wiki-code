{% extends "base.html" %}

{% block content %}
{# 1. Anzeige der letzten 3 Ã„nderungen, nur auf der Homepage #}
  {% if page.is_homepage %}
    <h2>ğŸš€ Neueste BeitrÃ¤ge</h2>
    <ul>
      {# WICHTIG: Verwenden Sie 'nav.pages' anstelle von 'pages', um nur gÃ¼ltige Seiten zu erhalten #}
      {# ACHTUNG: Der 'sort'-Filter kann das Problem weiterhin verursachen, wenn das Plugin nicht lÃ¤dt. #}
      
      {# Versuchen Sie diese Version: #}
      {% for page in pages | selectattr('meta.revision_date') | sort(attribute='meta.revision_date', reverse=True) | slice(3) %}
        <li>
          <a href="{{ page.url | url }}">{{ page.title }}</a>
          <small> (zuletzt geÃ¤ndert: {{ page.meta.revision_date.strftime('%Y-%m-%d') }})</small>
        </li>
      {% endfor %}
    </ul>
    <hr>
  {% endif %}

  {{ super() }}
  
  {# NEUER VERSUCH: Unterstriche (_) als Trennzeichen #}
  {% block content_article_bottom %} 
    <hr>
    
    <script src="https://giscus.app/client.js"
            data-repo="umbassa-long/wiki-code"
            data-repo-id="R_kgDOP3PyJA"
            data-category="Neuigkeiten"
            data-category-id="DIC_kwDOP3PyJM4Cx8D4"
            data-mapping="pathname"
            data-strict="0"
            data-reactions-enabled="1"
            data-emit-metadata="1"
            data-input-position="bottom"
            data-theme="preferred_color_scheme"
            data-lang="de"
            crossorigin="anonymous"
            async>
    </script>
    
  {% endblock %}
{% endblock %}